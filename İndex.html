<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Utay TV+</title>
<style>
:root {
  --bg: #0c0c18;
  --card: #1d1a2b;
  --accent: #eab8ff;
  --text: #f2f2f2;
}
body {
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  background: var(--bg);
  color: var(--text);
}
header {
  position: fixed;
  top:0; left:0; right:0;
  background:#111022;
  color:var(--accent);
  text-align:center;
  padding:12px;
  font-size:1.3em;
  font-weight:bold;
  z-index:10;
  box-shadow:0 2px 8px rgba(0,0,0,0.5);
}
#player {
  margin-top:60px;
  width:100%;
  max-height:60vh;
  background:#000;
}
video {width:100%; height:auto;}
#channel-list {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
  gap:16px;
  padding:24px;
  margin-bottom:60px;
}
.channel {
  background:var(--card);
  border-radius:12px;
  text-align:center;
  padding:12px;
  transition:transform .2s, box-shadow .2s;
}
.channel:hover {
  transform:scale(1.05);
  box-shadow:0 0 10px var(--accent);
}
.channel img {
  width:80px; height:80px; object-fit:contain;
}
button, input {
  border:none; outline:none;
  border-radius:8px;
  padding:10px;
}
#addBtn {
  position:fixed;
  right:20px; bottom:20px;
  background:var(--accent);
  color:#000;
  font-weight:bold;
  box-shadow:0 0 10px var(--accent);
}
#loginScreen {
  position:fixed; inset:0;
  background:var(--bg);
  display:flex; flex-direction:column;
  justify-content:center; align-items:center;
  z-index:100;
}
#loginScreen input {margin:5px; width:200px;}
#loginScreen button {margin-top:8px; background:var(--accent);}
#addModal {
  display:none;
  position:fixed; inset:0;
  background:rgba(0,0,0,0.8);
  justify-content:center; align-items:center;
  z-index:50;
}
#addModal form {
  background:var(--card);
  padding:20px;
  border-radius:12px;
  display:flex; flex-direction:column;
}
#addModal form input {margin:6px 0;}
</style>
</head>
<body>

<div id="loginScreen">
  <h2>Utay TV+ Giriş</h2>
  <input id="user" placeholder="Kullanıcı adı" />
  <input id="pass" type="password" placeholder="Şifre" />
  <button onclick="login()">Giriş Yap</button>
  <p id="loginMsg"></p>
</div>

<header>Utay TV+</header>
<div id="player">
  <video id="video" controls></video>
</div>

<div id="channel-list"></div>

<button id="addBtn" onclick="openModal()">＋ Kanal Ekle</button>

<div id="addModal">
  <form onsubmit="addChannel(event)">
    <h3>Yeni Kanal Ekle</h3>
    <input id="chName" placeholder="Kanal adı" required />
    <input id="chLogo" placeholder="Logo URL (isteğe bağlı)" />
    <input id="chUrl" placeholder="M3U8 adresi" required />
    <button type="submit">Ekle</button>
    <button type="button" onclick="closeModal()">İptal</button>
  </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
const video = document.getElementById('video');
const list = document.getElementById('channel-list');
const modal = document.getElementById('addModal');
let channels = JSON.parse(localStorage.getItem('channels')||'[]');

function loadChannels(){
  list.innerHTML='';
  channels.forEach((c,i)=>{
    const div=document.createElement('div');
    div.className='channel';
    div.innerHTML=`<img src="${c.logo||'https://via.placeholder.com/80?text=TV'}"><h4>${c.name}</h4>`;
    div.onclick=()=>play(c.url);
    list.appendChild(div);
  });
}

function play(url){
  if(Hls.isSupported()){
    const hls=new Hls();
    hls.loadSource(url);
    hls.attachMedia(video);
  } else { video.src=url; }
  video.play();
}

function openModal(){modal.style.display='flex';}
function closeModal(){modal.style.display='none';}

function addChannel(e){
  e.preventDefault();
  const name=document.getElementById('chName').value;
  const logo=document.getElementById('chLogo').value;
  const url=document.getElementById('chUrl').value;
  channels.push({name,logo,url});
  localStorage.setItem('channels',JSON.stringify(channels));
  closeModal(); loadChannels();
}

function login(){
  const u=document.getElementById('user').value;
  const p=document.getElementById('pass').value;
  if(u==='utay88' && p==='1234ugur'){
    document.getElementById('loginScreen').style.display='none';
  } else {
    document.getElementById('loginMsg').innerText='Hatalı giriş';
  }
}

loadChannels();
</script>
</body>
</html>
